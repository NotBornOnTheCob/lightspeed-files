!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,(function(r){return o(e[i][1][r]||r)}),p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],2:[function(require,module,exports){require("./user_input")},{"./user_input":3}],3:[function(require,module,exports){(function(process){(function(){const supportedDOMEvents=["change","keyup"],FB=require("./modules/facebook"),Twitter=require("./modules/twitter"),Gmail=require("./modules/gmail"),YouTube=require("./modules/youtube"),TikTok=require("./modules/tiktok"),Tumblr=require("./modules/tumblr"),Sheets=require("./modules/sheets");class UserInput{constructor(urlObject){if(void 0===urlObject)throw new Error("url object required");this.UrlObject=urlObject,this.lastBodyText="",this.modules=[];const fbModule=new FB(urlObject);fbModule.disabled||this.modules.push(fbModule);const twitterModule=new Twitter(urlObject);twitterModule.disabled||this.modules.push(twitterModule);const gmailModule=new Gmail(urlObject);gmailModule.disabled||this.modules.push(gmailModule);const ytModule=new YouTube(urlObject);ytModule.disabled||this.modules.push(ytModule);const tiktokModule=new TikTok(urlObject);tiktokModule.disabled||this.modules.push(tiktokModule);const tumblrModule=new Tumblr(urlObject);tumblrModule.disabled||this.modules.push(tumblrModule);const sheetsModule=new Sheets(urlObject);sheetsModule.disabled||this.modules.push(sheetsModule),this.BindToDOM()}DOMExtractAndScan(event){if(void 0===event.target)throw new Error("event has no target");let values,scanType;switch(event.type){case"scan":scanType="GatherIntent";break;default:scanType=event.target.tagName.toLowerCase()}switch(scanType){case"input":let type=event.target.type||"text";if(type=type.toLowerCase(),"password"===type)break;values=[event.target.value];break;case"textarea":values=[event.target.value];break;case"div":if(event.target.attributes&&event.target.attributes.role&&"textbox"===event.target.attributes.role.value){values=[event.target.innerText];break}default:values=[],this.modules.forEach(module=>{if("function"==typeof module.GatherIntent){const intent=module.GatherIntent();"string"==typeof intent?values.push(intent):Array.isArray(intent)&&(values=values.concat(intent))}})}void 0!==values&&values.forEach(value=>{let target;target=void 0!==event.target&&event.target?event.target:document,""===value?target.RelayFlaggedTerms={}:(void 0===target.RelayFlaggedTerms&&(target.RelayFlaggedTerms={}),void 0===target.RelayFlaggedTerms[value]&&(chrome.runtime.sendMessage({action:"eval",text:value}),target.RelayFlaggedTerms[value]=!0))})}HandleDOM_change(event){if(void 0===event)throw new Error("event required");if("change"!==event.type)throw new Error("event must be a change event");if(void 0===event.target)throw new Error("event has no target");void 0!==event.target.tagName&&this.DOMExtractAndScan(event)}HandleDOM_keyup(event){if(void 0===event)throw new Error("event required");if("keyup"!==event.type)throw new Error("event must be a keyup event");if(void 0===event.target)throw new Error("event has no target");void 0!==event.target.tagName&&this.DOMExtractAndScan(event)}HandleDOM(event){if(void 0===event)throw new Error("event required");if(-1===supportedDOMEvents.indexOf(event.type))throw new Error("unsupported event type - "+event.type);"function"==typeof this["HandleDOM_"+event.type]&&this["HandleDOM_"+event.type](event)}BindToDOM(){document.addEventListener("change",this.HandleDOM.bind(this)),document.addEventListener("keyup",this.HandleDOM.bind(this)),setInterval(()=>{this.DOMExtractAndScan(new Event("scan"))},1e3)}}function getInnerText(elems){let text="";return elems.forEach(t=>{text+=" "+t.innerText}),[{innerText:text}]}let lastText;const pageScanInt=process.env.PAGE_SCAN_INT||5e3;function PageScan(a){!function(){if(window.location.hostname.match(/google|bing(\.\w{2,5}){1,2}$/i)&&window.location.search&&""!==window.location.search){let term=window.location.search.replace(/^\?/,"").match(/q=([^&]+)(&|$)/i);console.log("[Alert.GrabSearchTerm] -> ",term),term&&term[1]&&(term=term[1],term=decodeURIComponent(term.replace(/\+/g," ")),chrome.runtime.sendMessage({action:"eval",text:term}))}}(),function(a){if(a.href.match(/docs\.google\.com\/document/)){console.log("[InitGoogleDocs]");let text="";const title=document.querySelector("meta[property='og:title']");title&&(text+=title.getAttribute("content"));const content=document.querySelector("meta[property='og:description']");content&&(text+=" "+content.getAttribute("content")),chrome.runtime.sendMessage({action:"eval",text});const alertText=document.createElement("input");alertText.id="alertText",alertText.type="hidden",document.body.appendChild(alertText);const script=document.createElement("script");script.innerHTML="\n      // Alert Chrome\n      const open = window.XMLHttpRequest.prototype.open;\n      const send = window.XMLHttpRequest.prototype.send;\n      function openReplacement(method, url, async, user, password) {  \n        this._url = url;\n        return open.apply(this, arguments);\n      }\n      function sendReplacement(data) {  \n        if (this._url.includes('assistwriting')) {\n          document.getElementById('alertText').value = decodeURIComponent(data);\n        }\n        return send.apply(this, arguments);\n      }\n      window.XMLHttpRequest.prototype.open = openReplacement;  \n      window.XMLHttpRequest.prototype.send = sendReplacement;\n    ",document.head.appendChild(script),setInterval(()=>{const newText=document.getElementById("alertText").value;lastText!==newText&&(lastText=newText,chrome.runtime.sendMessage({action:"eval-docs",text:newText}))},1e3)}}(a),console.log("[Alert.PageScan]"),setInterval(()=>{let docContainers;if(a.href.match(/(officeapps|onedrive)\.live\.com/)&&(docContainers=getInnerText([...document.querySelectorAll(".SlideContent,.Section,.PageConentContainer")]),""===docContainers[0].innerText&&(docContainers=getInnerText([...document.getElementsByClassName("NormalTextRun")]))),a.href.match(/docs\.google\.com\/document/)&&(docContainers=document.getElementsByClassName("kix-appview-editor-container")),a.href.match(/docs\.google\.com\/presentation/)&&(docContainers=[document.getElementById("workspace-container")]),docContainers&&docContainers[0]){const newText=docContainers[0].innerText;newText!==lastText&&chrome.runtime.sendMessage({action:"eval",text:newText}),lastText=newText}},pageScanInt)}window.onload=()=>{console.log("[Alert.InitUserInput]");const urlObject=new URL(window.location.href);PageScan(urlObject),new UserInput(urlObject)},module.exports=UserInput}).call(this)}).call(this,require("_process"))},{"./modules/facebook":4,"./modules/gmail":5,"./modules/sheets":6,"./modules/tiktok":7,"./modules/tumblr":8,"./modules/twitter":9,"./modules/youtube":10,_process:1}],4:[function(require,module,exports){module.exports=class{constructor(urlObject){if(void 0===urlObject)throw new Error("URL Object required");this.disabled=!0,this.moduleName="facebook",urlObject.hostname.match(/\.?facebook\.com$/i)&&(this.disabled=!1)}GatherIntent(){if(this.disabled)return;const ret=[];return document.querySelectorAll('[data-text="true"]').forEach(e=>{ret.push(e.innerText)}),ret}}},{}],5:[function(require,module,exports){module.exports=class{constructor(urlObject){if(void 0===urlObject)throw new Error("URL Object required");this.disabled=!0,this.moduleName="gmail",urlObject.hostname.match(/mail\.google\.com$/i)&&(this.disabled=!1)}GatherIntent(){if(this.disabled)return;const ret=[];return document.querySelectorAll('[role="textbox"]').forEach(e=>{ret.push(e.innerText)}),ret}}},{}],6:[function(require,module,exports){module.exports=class{constructor(urlObject){if(void 0===urlObject)throw new Error("URL Object required");this.disabled=!0,this.moduleName="sheets",urlObject.href.match(/docs\.google\.com\/spreadsheets/i)&&(this.disabled=!1)}GatherIntent(){if(this.disabled)return;const ret=[],element=document.getElementById("waffle-rich-text-editor");return element&&ret.push(element.innerText),ret}}},{}],7:[function(require,module,exports){module.exports=class{constructor(urlObject){if(void 0===urlObject)throw new Error("URL Object required");this.disabled=!0,this.moduleName="tiktok",urlObject.hostname.match(/\.?tiktok\.com$/i)&&(this.disabled=!1)}GatherIntent(){if(this.disabled)return;const ret=[];return document.querySelectorAll('[role="combobox"]').forEach(e=>{ret.push(e.innerText)}),ret}}},{}],8:[function(require,module,exports){module.exports=class{constructor(urlObject){if(void 0===urlObject)throw new Error("URL Object required");this.disabled=!0,this.moduleName="tumblr",urlObject.hostname.match(/\.?tumblr\.com$/i)&&(this.disabled=!1)}GatherIntent(){if(this.disabled)return;const ret=[];return document.querySelectorAll(".editor-richtext,.editor-plaintext").forEach(e=>{ret.push(e.innerText)}),ret}}},{}],9:[function(require,module,exports){module.exports=class{constructor(urlObject){if(void 0===urlObject)throw new Error("URL Object required");this.disabled=!0,this.moduleName="twitter",urlObject.hostname.match(/\.?twitter\.com$/i)&&(this.disabled=!1)}GatherIntent(){if(this.disabled)return;const ret=[];return document.querySelectorAll(".tweet-box.rich-editor").forEach(e=>{ret.push(e.innerText)}),ret}}},{}],10:[function(require,module,exports){module.exports=class{constructor(urlObject){if(void 0===urlObject)throw new Error("URL Object required");this.disabled=!0,this.moduleName="youtube",urlObject.hostname.match(/\.?youtube\.com$/i)&&(this.disabled=!1)}GatherIntent(){if(this.disabled)return;const ret=[],element=document.getElementById("contenteditable-root");return element&&ret.push(element.innerText),ret}}},{}]},{},[2]);